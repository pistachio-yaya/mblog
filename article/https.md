---
title:https
tag:https
category:protocol
---
HTTP是明文传输的，也就是说，我们可以从介于发送端到接收端之间的任意节点获取传输内容，这些节点可能是路由、代理等。比如在用户登录时，输入账号和密码，发送HTTP请求，恶意者只需要在代理服务器上做点手脚就可以拿到你的密码（具体是怎么拿到的呢？可做一个示例）。在发送端对密码进行加密是徒劳的，恶意者拿到加密后的账号和密码一样能登陆。所以我们需要安全的HTTP也就是HTTPS。TCP负责传输数据，HTTP负责包装数据。

>HTTP -->TCP(明文传输)

HTTPS与HTTP的不同之处在于：在HTTP和TCP之间加了一层加密层协议--TLS/SSL。

## TLS/SSL
TLS和SSL都是加密套件，负责对HTTP的数据进行加密，TLS是SSL的升级版。之前应用层将数据直接给到TCP进行传输，现在应用层先将数据给到TSL/SSL，待数据加密后再给到TCP。这样数据的传输就相对安全了，即使在中间节点被截获，恶意者也看不懂。

## 常见的加密方法
##### 对称加密
加密和解密数据用的密钥是一样的。其优势在于加密解密效率高，劣势在于数据发送方和接收方两两之间要协商一个唯一的不可泄露的密钥。

##### 非对称加密
加密的密钥与解密的密钥不同，分别为公钥和私钥。加密用的公钥是所有人都可以查到的，而解密用的私钥一般由网站的管理员持有。通过公钥加密的数据只能由私钥解密，反之同理。

## 加密过程
整个的加密过程其实是一个使用非对称加密方法传输对称加密密钥的过程,具体如下：

1. 用户访问网站，网站把证书给到浏览器（证书当中包含非对称加密的公钥）
2. 浏览器从证书中拿到网站的公钥
3. 浏览器生成一个只有自己知道的对称密钥，使用刚刚得到的非对称公钥加密后传输给网站
4. 网站通过非对称加密的私钥解密，得到对称密钥
5. 用对称密钥完成之后的通信

值得注意的是，证书不一定是安全的，可能是伪造或者被篡改过的
